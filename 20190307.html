<!doctype html>
<html lang="en">

	<head>
		<!-- START: GA -->
		<script>
</script>
		<!-- END: GA -->


		<meta charset="utf-8">

		<title>Web Crypto API</title>

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

    <style>
      img {
        border: none !important;
      }
      code {
        font-size: 150% !important;
        line-height: 150% !important;
        max-height: initial !important;
      }
    </style>

		<!-- Printing and PDF exports -->
		<script>
		var link = document.createElement("link");
link.rel = "stylesheet";
link.type = "text/css";
link.href = window.location.search.match(/print-pdf/gi)
  ? "css/print/pdf.css"
  : "css/print/paper.css";
document.getElementsByTagName("head")[0].appendChild(link);
</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

	<style media="screen">
section, .left {
  text-align: left;
}
  </style>

		<div class="reveal">
      <div class="slides">
				<section class="left">
          <h1>Web Crypto API</h1>

          <div>
            Sung<br />
            Monomax Software
          </div>
				</section>

        <section class="left">
          <h2>1. Why does it matter for node.js?</h2>
          <h2>2. Examples</h2>
				</section>

        <section>
          <h2>1. Why does it matter for node.js?</h2>
        </section>

        <section>
          <h3>Web Crypto API</h3>

          <p>A standardized JavaScript interface for accessing cryptographic primitives</p>
        </section>

        <section>
          <h3>W3C published a recommendation in January 2017</h3>
        </section>

        <section>
          <h3>Browser crypto implementations</h3>

          <ul>
            <li>Firefox - NSS (Network Security Services)</li>
            <li>Chrome - BoringSSL</li>
          </ul>
        </section>

        <section>
          <h3>A standard interface to interact with the underlying implementations.</h3>
        </section>

        <section>
          <pre><code>window.crypto.subtle.generateKey(
    {
        name: "HMAC",
        hash: {name: "SHA-256"},
    },
    false,
    ["sign", "verify"]
)
.then(function(key){
    console.log(key);
})
.catch(function(err){
    console.error(err);
});</code></pre>
        </section>

        <section>
          <pre><code>window.crypto.subtle.sign(
    {
        name: "HMAC",
    },
    key,
    data // ArrayBuffer of data you want to sign
)
.then(function(signature){
    //an ArrayBuffer containing the signature
    console.log(new Uint8Array(signature));
})
.catch(function(err){
    console.error(err);
});</code></pre>
        </section>

        <section>
          <h3>Node.js has its own crypto API</h3>
        </section>

        <section>
          <h3>crypto module</h3>
          <ul>
            <li>
              first documented in 0.1.94 release (August 2011)
            </li>
            <li>
              relied on the host machine's OpenSSL library.
            </li>
          </ul>
        </section>

        <section>
          <pre><code>var secret = '/* some secret string */';

hmac = crypto.createHmac('sha-256', secret);
hmac.update(data);
hash = hmac.digest('hex');

console.log("result:", hash);</code></pre>
        </section>

        <section>
          <h3>Problem</h3>
          <p>
            Harder to write code that targets both browsers and non-browsers
          </p>
        </section>

        <section>
          <h3>Possible solution #1</h3>
          <p>Write shims or wrappers</p>
        </section>

        <section>
          <h3>Abstraction is where bugs live</h3>
          <ul>
            <li>
              It is hard to audit and maintain shim and polyfills
            </li>
            <li>
              Should never be users' responsibility.
            </li>
          </ul>
          <p></p>
        </section>

        <section>
          <h3>Possible solution #2</h3>
          <p>Use polyfill or npm modules</p>
        </section>

        <section>
          <h3>#1 rule of cryptography</h3>
          <p>
            <u><b>NEVER</b></u> <u><b>EVER</b></u> implement your own cryptography.
          </p>
        </section>

        <section>
          <h3>Flaws</h3>

          <ul>
            <li>Users should <b>NEVER</b> implement crypto</li>
            <li>packages can be compromised</li>
            <li>Native modules face compilation issues</li>
            <li>Pure-JavaScript implementation would be slow</li>
          </ul>
        </section>

        <section>
          <h3>Should node.js implement Web Crypto API?</h3>
        </section>

        <section>
          <h3>Trade-off</h3>
        </section>

        <section>
          <h3>Favor</h3>

          <ul>
            <li>Write once to target browsers and non-browsers</li>
            <li>
              Rely on the standard library
              <ul>
                <li>No package to be compromised</li>
                <li>No cross platform issues</li>
                <li>Easier security audit</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h3>Favor - counter-arguments</h3>

          <ul>
            <li>How often do we have to write universal crypto code?</li>
            <li>Core does not mean bug-free</li>
          </ul>
        </section>

        <section>
          <h3>Against</h3>

          <ul>
            <li>Can't just add stuff to core for convenience</li>
            <li>Duplicate functionalities</li>
            <li>Deprecation of crypto</li>
          </ul>
        </section>

        <section>
          <h3>Against - counter-arguments</h3>

          <ul>
            <li>It's more than convenience</li>
            <li>Software evolve all the time</li>
          </ul>
        </section>
      </div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
// Full list of configuration options available at:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
  controls: true,
  progress: true,
  history: true,
  center: true,

  transition: "slide", // none/fade/slide/convex/concave/zoom

  // Optional reveal.js plugins
  dependencies: [
    {
      src: "lib/js/classList.js",
      condition: function() {
        return !document.body.classList;
      }
    },
    {
      src: "plugin/markdown/marked.js",
      condition: function() {
        return !!document.querySelector("[data-markdown]");
      }
    },
    {
      src: "plugin/markdown/markdown.js",
      condition: function() {
        return !!document.querySelector("[data-markdown]");
      }
    },
    {
      src: "plugin/highlight/highlight.js",
      async: true,
      condition: function() {
        return !!document.querySelector("pre code");
      },
      callback: function() {
        hljs.initHighlightingOnLoad();
      }
    },
    { src: "plugin/zoom-js/zoom.js", async: true },
    { src: "plugin/notes/notes.js", async: true }
  ]
});
</script>

	</body>
</html>
